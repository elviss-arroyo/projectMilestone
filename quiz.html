<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"> <!-- makes letters show -->
<title>Quiz</title> <!-- title on browser tab -->
<link rel="stylesheet" href="style.css"> <!-- link to CSS file -->

<style>
 .pass { color: green; } /* green pass */
 .fail { color: red; } /* red fail */
</style>
</head>

<body>

<header> <!-- top part with page title -->
<h1>Quiz</h1> <!-- heading -->
<nav> <!-- navigation menu -->
<ul>
<li><a href="index.html">Home</a></li> <!-- home -->
<li><a href="how-it-works.html">How HTTP Works</a></li> <!-- how it works page -->
<li><a href="impact.html">Impact of HTTP</a></li> <!-- impact page -->
<li><a href="key-concepts.html">Key Concepts</a></li> <!-- key concepts page -->
<li><a href="reference.html">References & Resources</a></li> <!-- refrences page -->
<li><a href="about.html">About</a></li> <!-- about page -->
<li><a href="quiz.html">Quiz</a></li> <!-- quiz page -->
</ul>
</nav>
</header>

<main>
<section>

<form id="exam"> <!-- form that holds quiz -->

<!-- Fill in the blank question -->
<p><strong>1. Fill in the blank: What does HTTP stand for?</strong></p> <!-- fill in the blank question -->
<input type="text" id="answer1"> <!-- type answer -->

<!-- Multiple choice question -->
<p><strong>2. Which HTTP method is used to retrieve data from a server?</strong></p> <!-- multiple choice question -->
<label><input type="radio" name="mcq2" value="A"> GET</label><br>
<label><input type="radio" name="mcq2" value="B"> POST</label><br>
<label><input type="radio" name="mcq2" value="C"> DELETE</label><br>

<!-- Multiple choice question -->
<p><strong>3. Which HTTP status code indicates "Not Found"?</strong></p> <!-- multiple choice question -->
<label><input type="radio" name="mcq3" value="A"> 200</label><br>
<label><input type="radio" name="mcq3" value="B"> 404</label><br>
<label><input type="radio" name="mcq3" value="C"> 500</label><br>

<!-- Multiple choice question -->
<p><strong>4. Which protocol is used for secure HTTP communication?</strong></p> <!-- multiple choice question -->
<label><input type="radio" name="mcq4" value="A"> FTP</label><br>
<label><input type="radio" name="mcq4" value="B"> HTTPS</label><br>
<label><input type="radio" name="mcq4" value="C"> SMTP</label><br>

<!-- Multi-selection question -->
<p><strong>5. Select all HTTP methods that modify server data:</strong></p> <!-- multi-selection question -->
<label><input type="checkbox" name="msq5" value="POST"> POST</label><br>
<label><input type="checkbox" name="msq5" value="PUT"> PUT</label><br>
<label><input type="checkbox" name="msq5" value="GET"> GET</label><br>
<label><input type="checkbox" name="msq5" value="DELETE"> DELETE</label><br>
<label><input type="checkbox" name="msq5" value="PATCH"> PATCH</label><br>

<!-- Submit and reset buttons -->
<button type="button" onclick="gradeQuiz()">Submit</button> <!-- button checks answers -->
<button type="button" onclick="retake()">Reset</button> <!-- button resets quiz -->

</form>

<!-- area where results will appear -->
<div id="result"></div> <!-- empty box for score -->

</section>
</main>

<footer>
<p>This is a class project <a href="https://ksuweb.github.io/IT3203/" target="_blank">https://ksuweb.github.io/IT3203/</a>.</p>
</footer>

<script>
// function runs when user hits submit
function gradeQuiz() {
    let score = 0; // score counter starts at 0
    const totalPoints = 100; // total points possible
    const pointsPerQuestion = totalPoints / 5; // points per question

    // store the correct answers here
    const correct1 = "Hypertext Transfer Protocol"; // fill in blank answer
    const correct2 = "A"; // correct letter A/B/C
    const correct3 = "B"; // correct letter A/B/C
    const correct4 = "B"; // correct letter A/B/C
    const correct5 = ["POST", "PUT", "DELETE", "PATCH"]; // multi-selection answers

    // get user answers
    let a1 = document.getElementById("answer1").value.trim(); // answer to Q1
    let a2 = document.querySelector('input[name="mcq2"]:checked'); // Q2
    let a3 = document.querySelector('input[name="mcq3"]:checked'); // Q3
    let a4 = document.querySelector('input[name="mcq4"]:checked'); // Q4
    let a5 = document.querySelectorAll('input[name="msq5"]:checked'); // Q5
    
    // check Q1
    if (a1.toLowerCase() === correct1.toLowerCase()) {
        score += pointsPerQuestion; // add points
    }

    // check Q2 only if answered
    if (a2 && a2.value === correct2) {
        score += pointsPerQuestion;
    }

    // check Q3
    if (a3 && a3.value === correct3) {
        score += pointsPerQuestion;
    }

    // check Q4
    if (a4 && a4.value === correct4) {
        score += pointsPerQuestion;
    }

    // check Q5 (multi-selection)
    let msq5Score = 0; // Q5 score
    if (a5.length > 0) {
        // count correct selections
        let correctSelections = 0; // correct count
        let incorrectSelections = 0; // incorrect count
        
        a5.forEach(checkbox => {
            if (correct5.includes(checkbox.value)) {
                correctSelections++; // add to correct
            } else {
                incorrectSelections++; // add to incorrect
            }
        });
        
        // calculate partial credit
        msq5Score = Math.max(0, (correctSelections - incorrectSelections) / correct5.length) * pointsPerQuestion;
        score += msq5Score; // add to total score
    }

    // determine pass or fail
    let message = "";
    let cssClass = "";

    if (score >= 70) { // passing score
        message = "PASS";
        cssClass = "pass"; // green text
    } else {
        message = "FAIL";
        cssClass = "fail"; // red text
    }

    // show results
    document.getElementById("result").innerHTML =
        `<h3 class="${cssClass}">Result: ${message}</h3>
         <p>Score: ${Math.round(score)}%</p>
         <p><strong>Correct Answers:</strong></p>
         <p>1: ${correct1}</p>
         <p>2: ${correct2} (GET)</p>
         <p>3: ${correct3} (404)</p>
         <p>4: ${correct4} (HTTPS)</p>
         <p>5: ${correct5.join(", ")}</p>`;
}

// function to reset quiz
function retake() {
    document.getElementById("exam").reset(); // reset form
    document.getElementById("result").innerHTML = ""; // clear result box
}
</script>

</body>
</html>
